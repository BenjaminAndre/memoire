\begin{algo}[Appartenance]\label{alg:membership}
  \begin{algorithmic}[1]
    \REQUIRE une trace annotée $\gamma\in\Phi^*$, un automate à files \fifo et un état de contrôle actif $q_a$
    \ENSURE si $\gamma\in AL(F)$ ou non
    \IF{$\gamma$ n'est pas correctement formattée pour $F$}
      \RETURN faux
    \ENDIF
    \STATE $a,\gamma'\leftarrow$ premier symbole de $\gamma$ et le reste de la trace annotée
    \IF{$a\in T_Q$}
      \IF {$a$ correspond à $q_a$}
        \RETURN vrai
      \ENDIF
    \ELSIF{$a\in\bar{\Theta}$}
      \STATE $a'\leftarrow a$ sans la barre
      \STATE $(p, c!m, q)\leftarrow\delta(a')$ \COMMENT{comme $a\in\bar{\Theta}$, il s'agit forcément d'une action d'envoi}
      \IF{$p=q_a$}
        \FORALL{$\theta_r$ consommant le symbole $m$ dans le canal $c$}
          \FORALL{position $i$ dans $\gamma'$ sauf après le symbole terminal $t\in T_Q$}
            \STATE $\gamma''\leftarrow\gamma'$ où $\theta_r$ a été inséré à la position $i$
            \IF{Appartenance($\gamma''$, $F$, $q$)}
              \RETURN vrai
            \ENDIF
          \ENDFOR
        \ENDFOR
      \ENDIF
    \ELSE
      \STATE $(p,action,q)\leftarrow\delta(a)$ \COMMENT{action peut être un envoi où une réception mais ce n'est pas important puisqu'il n'est pas necéssaire de retenir le contenu des canaux}
      \IF{$p=q_a$}
        \RETURN Appartenance($\gamma'$, $F$, $q$)
      \ENDIF
    \ENDIF
    \RETURN faux
  \end{algorithmic}
\end{algo}
